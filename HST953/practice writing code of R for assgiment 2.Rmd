---
title: "practice writing code of R for assingment2"
author: "Ryo uchimido"
date: "10/24/2017"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
#setwd("~/data/HST.953") # Students will need to set their own path or see below
 if(!("Hmisc" %in% installed.packages()[,1])) {
 install.packages("Hmisc")
 }

library(Hmisc)

```
```{r}
dat <- read.csv("/Users/uchimidouryou/Documents/aline-dataset.csv")
dim(dat)

dat$age.cat <- cut2(dat$age,g=4)  # Added so the file will compile.  You will need to update this variable later on.
dat$service_unit2 <- dat$service_unit=="MICU"  # Added so the file will compile.  You will need to update this variable later on.

```
```{r}
plot(dat,n$bun_first,dat$creatinine_first)
```
```{r}
with(dat,plot(bun_first,creatinine_first))

####same???
```

```{r}
plot(log(dat$bun_first),-1/dat$creatinine_firstË†(1/3))


```
```{r}
plot(log(dat$bun_first),-1/dat$creatinine_first^(1/3))
```
```{r}
bun.creat.lm <- lm(I(-1/dat$creatinine_first^(1/3)) ~ I(log(bun_first)), data=dat)
summary(bun.creat.lm)
```
```{r}
confint(bun.creat.lm)
```

```{r}
library(sjPlot)
```
```{r}
sjp.lm(bun.creat.lm,type = "coef")
```
```{r}
plot(log(dat$bun_first), -1/dat$creatinine_first^(1/3),pch=19)
abline(bun.creat.lm,col='red')
```
```{r}
dat$renal_flg <- as.factor(dat$renal_flg)

##why we have to make renal_flag a factor?????
```
```{r}
#plot(log(dat$bun_first), -1/dat$creatinine_first^(1/3),pch=19)
plot(log(dat$bun_first),-1/dat$creatinine_first^(1/3),pch=19)
```
```{r}
plot(log(dat$bun_first),-1/dat$creatinine_first^(1/3),pch=19,col=dat$renal_flg)
```
###???? not same as wiht the official one


```{r}
with(dat,plot(log(bun_first),-1/creatinine_first^(1/3),col=renal_flg,pch=19))

## same plot

# in with don't need to put "dat$" before variable, it is OK if you put dat just after with
```

```{r}
bun.creat.renal.lm <-lm(I(-1/dat$creatinine_first^(1/3)) ~ I(log(bun_first))+renal_flg,data = dat)
summary(bun.creat.renal.lm)
```

```{r}
bun.creat.renal.int.lm <- lm(I(-1/dat$creatinine_first^(1/3)) ~ I(log(bun_first))*renal_flg,data = dat)

## what is the diffrence bet + and * ????
summary(bun.creat.renal.int.lm)
```
```{r}
anova(bun.creat.renal.lm)
```

```{r}
anova(bun.creat.renal.lm,bun.creat.renal.int.lm)

#what is the null hypothesis of F-test here?
```

```{r}
plot(log(dat$bun_first),-1/dat$creatinine_first^(1/3),pch=19,col=dat$renal_flg)
abline(a=coef(bun.creat.renal.lm)[1],b=coef(bun.creat.renal.lm)[2],col="blue",lwd=2)
abline(a=sum(coef(bun.creat.renal.lm)[c(1,3)]),b=coef(bun.creat.renal.lm)[2],col="red",lwd=2)
```

